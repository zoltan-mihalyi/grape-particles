<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div id="game" style="width: 600px; height: 600px;">

</div>

<script src="lib/grape.js"></script>
<script src="grape-particles.js"></script>
<script>


(function () {
    var flame = Grape.Particles.particle('circle', [
        {
            offset: 0,
            duration: [10, 30],
            size: 0,
            speed: [2, 4],
            direction: [85, 95],
            gravity: 0.05,
            gravityDirection: 270,
            r: 255,
            g: 40,
            b: 10,
            a: 0.5,
            composite: 'lighter'
        },
        {
            offset: 15,
            size: [2, 14]
        },
        {
            offset: 70,
            r: 255,
            g: 165,
            b: 30
        },
        {
            offset: 100,
            size: 1,
            r: 90,
            g: 90,
            b: 90,
            a: 0
        }
    ]);


    var flame2 = Grape.Particles.particle('glow', [
        {
            offset: 0,
            duration: [10, 30],
            size: 0,
            speed: [1, 6],
            direction: [85, 95],
            r: 255,
            g: 40,
            b: 10,
            a: 0,
            composite: 'lighter'
        },
        {
            offset: 15,
            size: [3, 40],
            a: 0.5
        },
        {
            offset: 70,
            r: 255,
            g: 165,
            b: 30,
            a: 0.2
        },
        {
            offset: 100,
            size: [0, 2],
            r: 90,
            g: 90,
            b: 90,
            a: 0
        }
    ]);


    var fireworks = Grape.Particles.particle('glow', [
        {
            offset: 0,
            duration: [10, 30],
            size: 8,
            speed: [2, 4],
            direction: [0, 360],
            gravity: 0.05,
            gravityDirection: 270,
            r: [0, 255],
            g: [0, 255],
            b: [0, 255]
        },
        {
            offset: 100,
            a: 0,
            size: 0
        }
    ]);

    var water = Grape.Particles.particle('glow', [
        {
            offset: 0,
            duration: 24,
            size: [2, 12],
            speed: [4, 5],
            direction: [-10, 10],
            gravity: 0.35,
            gravityDirection: 270,
            r: 110,
            g: 110,
            b: 255,
            a: 0.1,
            composite: 'lighter'
        },
        {
            offset: 80,
            size: [2, 12],
            a: 0.3
        },
        {
            offset: 100,
            a: 0.1
        }
    ]);

    var snow = Grape.Particles.particle('circle', [
        {
            offset: 0,
            duration: 160,
            size: [1, 3],
            speed: [0.8, 1.2],
            direction: [270, 270],
            gravity: 0.00,
            gravityDirection: 270,
            r: 255,
            g: 255,
            b: 255,
            a: 0

        },
        {
            offset:10,
            a:0.4
        }
    ]);

    var meteor = Grape.Particles.particle('glow', [
        {
            offset: 0,
            duration: 30,
            size: [6, 14],
            speed: 1.6,
            direction: 45,
            gravity: 0.05,
            gravityDirection: 45,
            r: 80,
            g: 170,
            b: 0,
            a: 1,
            composite: 'lighter'
        },
        {
            offset: 20,
            r: 100,
            g: 150,
            b: 255,
            a: 0.2
        },
        {
            offset: 100,
            a: 0
        }
    ]);

    var rainbow = Grape.Particles.particle('circle', [
        {
            offset: 0,
            duration: 30,
            size: [0, 16],
            speed: 6.4,
            direction: 45,
            gravity: 0.3,
            gravityDirection: 270,
            r: 255,
            g: 0,
            b: 0,
            a: 0.5,
            composite: 'lighter'
        },
        {
            offset: 33,
            r: 0,
            g: 255,
            b: 0
        },
        {
            offset: 66,
            r: 0,
            g: 0,
            b: 255
        },
        {
            offset: 100,
            r: 255,
            g: 0,
            b: 0
        }
    ]);

    var smoke = Grape.Particles.particle('glow', [
        {
            offset: 0,
            size: [0, 10],
            duration: 20,
            speed: 2.5,
            direction: 70,
            gravity: 0.1,
            gravityDirection: 0,
            r: 190,
            g: 190,
            b: 190,
            a: 0.3
        },
        {
            offset: 100,
            a: 0
        }
    ]);

    var stars = Grape.Particles.particle('circle', [
        {
            offset: 0,
            duration: 20,
            size: 0,
            r: 255,
            g: 255,
            b: 255,
            speed: [4, 8],
            direction: [0, 360]
        },
        {
            offset: 100,
            size: [1, 6]
        }
    ]);


    var cloud = Grape.Particles.particle('glow', [
        {
            offset: 0,
            duration: [200, 300],
            size: [0, 25],
            speed:0.3,
            r: 200,
            g: 200,
            b: 200,
            a: 0
        },
        {
            offset: 20,
            size: [30, 50],
            a: 0.2
        },
        {
            offset: 80,
            size: [20, 50],
            a: 0.2
        },
        {
            offset: 100,
            size: [0, 10],
            a: 0
        }
    ]);


    var EllipseEmitter = {
        x: this.x,
        y: this.y + 48,
        shape: 'ellipse',
        width: 24,
        height: 16,
        duration: Infinity,
        rate: 6
    };

    var CircleEmitter = {
        x: this.x,
        y: this.y + 48,
        shape: 'ellipse',
        width: 24,
        height: 16,
        duration: Infinity,
        rate: 6
    };

    var PointEmitter = {
        x: this.x,
        y: this.y,
        shape: 'point',
        duration: Infinity,
        rate: 6
    };

    var RectangleEmitter = {
        x: this.x,
        y: this.y,
        width: 128,
        height: 16,
        shape: 'rectangle',
        duration: Infinity,
        rate: 6
    };

    var DemoScene = Grape.Scene.extend({
        init: function () {
            var particleSystem = new Grape.Particles.ParticleSystem();
            this.addSystem('particles', particleSystem);
            this.backgroundColor = '#333';
            this.width = 1000;
            this.height = 1000;

            particleSystem.createEmitter({
                x: 32,
                y: 128,
                shape: 'ellipse',
                width: 24,
                height: 16,
                duration: Infinity,
                rate: 6,
                particle: flame
            });

            particleSystem.createEmitter({
                x: 96,
                y: 128,
                shape: 'ellipse',
                width: 48,
                height: 32,
                duration: Infinity,
                rate: 12,
                particle: flame2
            });

            particleSystem.createEmitter({
                x: 224,
                y: 96,
                shape: 'point',
                duration: Infinity,
                rate: 6,
                particle: fireworks
            });

            particleSystem.createEmitter({
                x: 320,
                y: 32,
                shape: 'ellipse',
                width: 32,
                height: 32,
                duration: Infinity,
                rate: 6,
                particle: water
            });

            particleSystem.createEmitter({
                x: 32,
                y: 380,
                shape: 'rectangle',
                width: 160,
                height: 32,
                duration: Infinity,
                rate: 0.8,
                particle: snow
            });

            particleSystem.createEmitter({
                x: 224,
                y: 224,
                shape: 'ellipse',
                width: 24,
                height: 24,
                duration: Infinity,
                rate: 6,
                particle: meteor
            });

            particleSystem.createEmitter({
                x: 352,
                y: 224,
                shape: 'ellipse',
                width: 24,
                height: 24,
                duration: Infinity,
                rate: 6,
                particle: rainbow
            });

            particleSystem.createEmitter({
                x: 512,
                y: 128,
                shape: 'ellipse',
                width: 24,
                height: 24,
                duration: Infinity,
                rate: 6,
                particle: smoke
            });

            particleSystem.createEmitter({
                x: 0,
                y: 292,
                shape: 'ellipse',
                width:160,
                height: 96,
                duration: Infinity,
                rate: 1.5,
                particle: cloud
            });

            particleSystem.createEmitter({
                x: 384,
                y: 448,
                shape: 'point',
                duration: Infinity,
                rate: 6,
                particle: stars
            });
        },
        'event render': function (ctx) {
            ctx.fillStyle = 'black';
            ctx.fillText('Particles:' + this.getSystem('particles').particles.length, 20, 20);
        }
    });

    new Grape.Game({container: 'game'}).start(DemoScene);
})();
</script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-52569559-1', 'auto');
    ga('send', 'pageview');

</script>

</body>
</html>